{"version":3,"sources":["../../src/util/image-map.js"],"names":["getMapByName","getMapOfImage","getImageOfArea","name","_document","map","querySelector","element","usemap","getAttribute","slice","parentElement","nodeName","toLowerCase"],"mappings":";;;;;QAIgBA,Y,GAAAA,Y;QAOAC,a,GAAAA,a;QAUAC,c,GAAAA,c;;AApBhB;;;;AACA;;;;;;AAEO,SAASF,YAAT,CAAsBG,IAAtB,EAA4BC,SAA5B,EAAuC;AAC5C;AACA;AACA,MAAMC,MAAMD,UAAUE,aAAV,CAAwB,eAAe,mBAAUH,IAAV,CAAf,GAAiC,IAAzD,CAAZ;AACA,SAAOE,OAAO,IAAd;AACD;;AAEM,SAASJ,aAAT,CAAuBM,OAAvB,EAAgC;AACrC,MAAMC,SAASD,QAAQE,YAAR,CAAqB,QAArB,CAAf;AACA,MAAI,CAACD,MAAL,EAAa;AACX,WAAO,IAAP;AACD;;AAED,MAAMJ,YAAY,2BAAYG,OAAZ,CAAlB;AACA,SAAOP,aAAaQ,OAAOE,KAAP,CAAa,CAAb,CAAb,EAA8BN,SAA9B,CAAP;AACD;;AAEM,SAASF,cAAT,CAAwBK,OAAxB,EAAiC;AACtC,MAAMF,MAAME,QAAQI,aAApB;;AAEA,MAAI,CAACN,IAAIF,IAAL,IAAaE,IAAIO,QAAJ,CAAaC,WAAb,OAA+B,KAAhD,EAAuD;AACrD,WAAO,IAAP;AACD;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAMT,YAAY,2BAAYG,OAAZ,CAAlB;AACA,SAAOH,UAAUE,aAAV,CAAwB,kBAAkB,mBAAUD,IAAIF,IAAd,CAAlB,GAAwC,IAAhE,KAAyE,IAAhF;AACD","file":"image-map.js","sourcesContent":["\r\nimport cssEscape from 'css.escape';\r\nimport getDocument from '../util/get-document';\r\n\r\nexport function getMapByName(name, _document) {\r\n  // apparently getElementsByName() also considers id attribute in IE & opera\r\n  // https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByName\r\n  const map = _document.querySelector('map[name=\"' + cssEscape(name) + '\"]');\r\n  return map || null;\r\n}\r\n\r\nexport function getMapOfImage(element) {\r\n  const usemap = element.getAttribute('usemap');\r\n  if (!usemap) {\r\n    return null;\r\n  }\r\n\r\n  const _document = getDocument(element);\r\n  return getMapByName(usemap.slice(1), _document);\r\n}\r\n\r\nexport function getImageOfArea(element) {\r\n  const map = element.parentElement;\r\n\r\n  if (!map.name || map.nodeName.toLowerCase() !== 'map') {\r\n    return null;\r\n  }\r\n\r\n  // NOTE: image maps can also be applied to <object> with image content,\r\n  // but no browser supports this at the moment\r\n\r\n  // HTML5 specifies HTMLMapElement.images to be an HTMLCollection of all\r\n  // <img> and <object> referencing the <map> element, but no browser implements this\r\n  //   https://www.w3.org/TR/html5/embedded-content-0.html#the-map-element\r\n  //   https://developer.mozilla.org/en-US/docs/Web/API/HTMLMapElement\r\n  // the image must be valid and loaded for the map to take effect\r\n  const _document = getDocument(element);\r\n  return _document.querySelector('img[usemap=\"#' + cssEscape(map.name) + '\"]') || null;\r\n}\r\n"]}