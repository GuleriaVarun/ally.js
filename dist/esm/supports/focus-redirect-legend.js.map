{"version":3,"sources":["../../src/supports/focus-redirect-legend.js"],"names":["element","mutate","innerHTML","validate","focusTarget","_document","focusable","querySelector","tabbable","focus","activeElement"],"mappings":";AACA;;AAEA,eAAe;AACbA,WAAS,UADI;AAEbC,UAAQ,gBAASD,OAAT,EAAkB;AACxBA,YAAQE,SAAR,GAAoB,kEAApB;AACA;AACA,WAAO,KAAP;AACD,GANY;AAObC,YAAU,kBAASH,OAAT,EAAkBI,WAAlB,EAA+BC,SAA/B,EAA0C;AAClD,QAAMC,YAAYN,QAAQO,aAAR,CAAsB,sBAAtB,CAAlB;AACA,QAAMC,WAAWR,QAAQO,aAAR,CAAsB,qBAAtB,CAAjB;;AAEA;AACA;AACAP,YAAQS,KAAR;;AAEAT,YAAQO,aAAR,CAAsB,QAAtB,EAAgCE,KAAhC;AACA,WAAOJ,UAAUK,aAAV,KAA4BJ,SAA5B,IAAyC,WAAzC,IACFD,UAAUK,aAAV,KAA4BF,QAA5B,IAAwC,UADtC,IAEF,EAFL;AAGD;AAnBY,CAAf","file":"focus-redirect-legend.js","sourcesContent":["\r\n// see https://jsbin.com/nenirisage/edit?html,js,console,output\r\n\r\nexport default {\r\n  element: 'fieldset',\r\n  mutate: function(element) {\r\n    element.innerHTML = '<legend>legend</legend><input tabindex=\"-1\"><input tabindex=\"0\">';\r\n    // take care of focus in validate();\r\n    return false;\r\n  },\r\n  validate: function(element, focusTarget, _document) {\r\n    const focusable = element.querySelector('input[tabindex=\"-1\"]');\r\n    const tabbable = element.querySelector('input[tabindex=\"0\"]');\r\n\r\n    // Firefox requires this test to focus the <fieldset> first, while this is not necessary in\r\n    // https://jsbin.com/nenirisage/edit?html,js,console,output\r\n    element.focus();\r\n\r\n    element.querySelector('legend').focus();\r\n    return _document.activeElement === focusable && 'focusable'\r\n      || _document.activeElement === tabbable && 'tabbable'\r\n      || '';\r\n  },\r\n};\r\n"]}