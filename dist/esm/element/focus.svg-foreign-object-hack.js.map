{"version":3,"sources":["../../src/element/focus.svg-foreign-object-hack.js"],"names":["makeFocusableForeignObject","fragment","document","createElement","innerHTML","firstChild","element","isSvgElement","ownerSVGElement","nodeName","toLowerCase","foreignObject","appendChild","input","querySelector","focus","disabled","removeChild"],"mappings":";AACA,SAASA,0BAAT,GAAsC;AACpC,MAAMC,WAAWC,SAASC,aAAT,CAAuB,KAAvB,CAAjB;AACAF,WAASG,SAAT;;AAIA,SAAOH,SAASI,UAAT,CAAoBA,UAA3B;AACD;;AAED,eAAe,UAASC,OAAT,EAAkB;AAC/B;AACA;AACA;AACA,MAAMC,eAAeD,QAAQE,eAAR,IAA2BF,QAAQG,QAAR,CAAiBC,WAAjB,OAAmC,KAAnF;AACA,MAAI,CAACH,YAAL,EAAmB;AACjB,WAAO,KAAP;AACD;;AAED;AACA,MAAMI,gBAAgBX,4BAAtB;AACAM,UAAQM,WAAR,CAAoBD,aAApB;AACA,MAAME,QAAQF,cAAcG,aAAd,CAA4B,OAA5B,CAAd;AACAD,QAAME,KAAN;;AAEA;AACA;AACA;AACA;AACAF,QAAMG,QAAN,GAAiB,IAAjB;;AAEA;AACAV,UAAQW,WAAR,CAAoBN,aAApB;AACA,SAAO,IAAP;AACD","file":"focus.svg-foreign-object-hack.js","sourcesContent":["\r\nfunction makeFocusableForeignObject() {\r\n  const fragment = document.createElement('div');\r\n  fragment.innerHTML = `<svg><foreignObject width=\"30\" height=\"30\">\r\n      <input type=\"text\"/>\r\n  </foreignObject></svg>`;\r\n\r\n  return fragment.firstChild.firstChild;\r\n}\r\n\r\nexport default function(element) {\r\n  // Edge13, Edge14: foreignObject focus hack\r\n  // https://jsbin.com/kunehinugi/edit?html,js,output\r\n  // https://jsbin.com/fajagi/3/edit?html,js,output\r\n  const isSvgElement = element.ownerSVGElement || element.nodeName.toLowerCase() === 'svg';\r\n  if (!isSvgElement) {\r\n    return false;\r\n  }\r\n\r\n  // inject and focus an <input> element into the SVG element to receive focus\r\n  const foreignObject = makeFocusableForeignObject();\r\n  element.appendChild(foreignObject);\r\n  const input = foreignObject.querySelector('input');\r\n  input.focus();\r\n\r\n  // upon disabling the activeElement, IE and Edge\r\n  // will not shift focus to <body> like all the other\r\n  // browsers, but instead find the first focusable\r\n  // ancestor and shift focus to that\r\n  input.disabled = true;\r\n\r\n  // clean up\r\n  element.removeChild(foreignObject);\r\n  return true;\r\n}\r\n"]}