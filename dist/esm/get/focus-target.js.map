{"version":3,"sources":["../../src/get/focus-target.js"],"names":["getFocusRedirectTarget","getParents","isFocusable","contextToElement","context","except","element","label","result","getTarget","_element","focusable","rules","skipFocusable","Boolean","slice","some"],"mappings":";AACA;;;;AAIA,OAAOA,sBAAP,MAAmC,yBAAnC;AACA,OAAOC,UAAP,MAAuB,gBAAvB;AACA,OAAOC,WAAP,MAAwB,iBAAxB;AACA,OAAOC,gBAAP,MAA6B,4BAA7B;;AAEA,eAAe,YAAiC;AAAA,iFAAJ,EAAI;AAAA,MAAvBC,OAAuB,QAAvBA,OAAuB;AAAA,MAAdC,MAAc,QAAdA,MAAc;;AAC9C,MAAMC,UAAUH,iBAAiB;AAC/BI,WAAO,kBADwB;AAE/BH;AAF+B,GAAjB,CAAhB;;AAKA,MAAII,SAAS,IAAb;AACA,MAAMC,YAAY,SAAZA,SAAY,CAASC,QAAT,EAAmB;AACnC,QAAMC,YAAYT,YAAYU,KAAZ,CAAkB;AAClCR,eAASM,QADyB;AAElCL;AAFkC,KAAlB,CAAlB;;AAKA,QAAIM,SAAJ,EAAe;AACbH,eAASE,QAAT;AACA,aAAO,IAAP;AACD;;AAEDF,aAASR,uBAAuB;AAC9BI,eAASM,QADqB;AAE9BG,qBAAe;AAFe,KAAvB,CAAT;;AAKA,WAAOC,QAAQN,MAAR,CAAP;AACD,GAjBD;;AAmBA,MAAIC,UAAUH,OAAV,CAAJ,EAAwB;AACtB,WAAOE,MAAP;AACD;;AAEDP,aAAW,EAACG,SAASE,OAAV,EAAX,EAA+BS,KAA/B,CAAqC,CAArC,EAAwCC,IAAxC,CAA6CP,SAA7C;AACA,SAAOD,MAAP;AACD","file":"focus-target.js","sourcesContent":["\r\n/*\r\n  Identify the first focusable element in the element's ancestry, including itself\r\n*/\r\n\r\nimport getFocusRedirectTarget from './focus-redirect-target';\r\nimport getParents from '../get/parents';\r\nimport isFocusable from '../is/focusable';\r\nimport contextToElement from '../util/context-to-element';\r\n\r\nexport default function({context, except} = {}) {\r\n  const element = contextToElement({\r\n    label: 'get/focus-target',\r\n    context,\r\n  });\r\n\r\n  let result = null;\r\n  const getTarget = function(_element) {\r\n    const focusable = isFocusable.rules({\r\n      context: _element,\r\n      except,\r\n    });\r\n\r\n    if (focusable) {\r\n      result = _element;\r\n      return true;\r\n    }\r\n\r\n    result = getFocusRedirectTarget({\r\n      context: _element,\r\n      skipFocusable: true,\r\n    });\r\n\r\n    return Boolean(result);\r\n  };\r\n\r\n  if (getTarget(element)) {\r\n    return result;\r\n  }\r\n\r\n  getParents({context: element}).slice(1).some(getTarget);\r\n  return result;\r\n}\r\n"]}