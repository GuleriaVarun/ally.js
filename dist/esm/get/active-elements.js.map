{"version":3,"sources":["../../src/get/active-elements.js"],"names":["isShadowed","getShadowHostParents","walkToShadowedElement","list","document","activeElement","shadowRoot","unshift","walkFromShadowedElement","hosts","context","concat","body","focus"],"mappings":";AACA;AACA;;AAEA,OAAOA,UAAP,MAAuB,gBAAvB;AACA,OAAOC,oBAAP,MAAiC,uBAAjC;;AAEA,SAASC,qBAAT,GAAiC;AAC/B,MAAMC,OAAO,CAACC,SAASC,aAAV,CAAb;;AAEA,SAAOF,KAAK,CAAL,KAAWA,KAAK,CAAL,EAAQG,UAA1B,EAAsC;AACpCH,SAAKI,OAAL,CAAaJ,KAAK,CAAL,EAAQG,UAAR,CAAmBD,aAAhC;AACD;;AAED,SAAOF,IAAP;AACD;;AAED,SAASK,uBAAT,GAAmC;AACjC,MAAMC,QAAQR,qBAAqB,EAACS,SAASN,SAASC,aAAnB,EAArB,CAAd;AACA,SAAO,CAACD,SAASC,aAAV,EAAyBM,MAAzB,CAAgCF,KAAhC,CAAP;AACD;;AAED,eAAe,YAAW;AACxB,MAAIL,SAASC,aAAT,KAA2B,IAA/B,EAAqC;AACnC;AACAD,aAASQ,IAAT,CAAcC,KAAd;AACD;;AAED;AACA;AACA,MAAIb,WAAWI,SAASC,aAApB,CAAJ,EAAwC;AACtC,WAAOG,yBAAP;AACD;;AAED,SAAON,uBAAP;AACD","file":"active-elements.js","sourcesContent":["\r\n// [0] always is the actual active element (even within web-components)\r\n// [0+n] is the hierarchy of shadow-doms with [length -1] being the top most shadow-host\r\n\r\nimport isShadowed from '../is/shadowed';\r\nimport getShadowHostParents from './shadow-host-parents';\r\n\r\nfunction walkToShadowedElement() {\r\n  const list = [document.activeElement];\r\n\r\n  while (list[0] && list[0].shadowRoot) {\r\n    list.unshift(list[0].shadowRoot.activeElement);\r\n  }\r\n\r\n  return list;\r\n}\r\n\r\nfunction walkFromShadowedElement() {\r\n  const hosts = getShadowHostParents({context: document.activeElement});\r\n  return [document.activeElement].concat(hosts);\r\n}\r\n\r\nexport default function() {\r\n  if (document.activeElement === null) {\r\n    // IE10 does not redirect focus to <body> when the activeElement is removed\r\n    document.body.focus();\r\n  }\r\n\r\n  // Firefox currently leaks the shadowed element\r\n  // @browser-issue Gecko https://bugzilla.mozilla.org/show_bug.cgi?id=1117535\r\n  if (isShadowed(document.activeElement)) {\r\n    return walkFromShadowedElement();\r\n  }\r\n\r\n  return walkToShadowedElement();\r\n}\r\n"]}