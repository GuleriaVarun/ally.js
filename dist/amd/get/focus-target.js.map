{"version":3,"sources":["../../src/get/focus-target.js"],"names":["context","except","element","label","result","getTarget","_element","focusable","isFocusable","rules","skipFocusable","Boolean","slice","some"],"mappings":";;;;;;;;;;;;;;;;;;;oBAUe,YAAiC;AAAA,mFAAJ,EAAI;AAAA,QAAvBA,OAAuB,QAAvBA,OAAuB;AAAA,QAAdC,MAAc,QAAdA,MAAc;;AAC9C,QAAMC,UAAU,gCAAiB;AAC/BC,aAAO,kBADwB;AAE/BH;AAF+B,KAAjB,CAAhB;;AAKA,QAAII,SAAS,IAAb;AACA,QAAMC,YAAY,SAAZA,SAAY,CAASC,QAAT,EAAmB;AACnC,UAAMC,YAAYC,oBAAYC,KAAZ,CAAkB;AAClCT,iBAASM,QADyB;AAElCL;AAFkC,OAAlB,CAAlB;;AAKA,UAAIM,SAAJ,EAAe;AACbH,iBAASE,QAAT;AACA,eAAO,IAAP;AACD;;AAEDF,eAAS,mCAAuB;AAC9BJ,iBAASM,QADqB;AAE9BI,uBAAe;AAFe,OAAvB,CAAT;;AAKA,aAAOC,QAAQP,MAAR,CAAP;AACD,KAjBD;;AAmBA,QAAIC,UAAUH,OAAV,CAAJ,EAAwB;AACtB,aAAOE,MAAP;AACD;;AAED,2BAAW,EAACJ,SAASE,OAAV,EAAX,EAA+BU,KAA/B,CAAqC,CAArC,EAAwCC,IAAxC,CAA6CR,SAA7C;AACA,WAAOD,MAAP;AACD,G","file":"focus-target.js","sourcesContent":["\r\n/*\r\n  Identify the first focusable element in the element's ancestry, including itself\r\n*/\r\n\r\nimport getFocusRedirectTarget from './focus-redirect-target';\r\nimport getParents from '../get/parents';\r\nimport isFocusable from '../is/focusable';\r\nimport contextToElement from '../util/context-to-element';\r\n\r\nexport default function({context, except} = {}) {\r\n  const element = contextToElement({\r\n    label: 'get/focus-target',\r\n    context,\r\n  });\r\n\r\n  let result = null;\r\n  const getTarget = function(_element) {\r\n    const focusable = isFocusable.rules({\r\n      context: _element,\r\n      except,\r\n    });\r\n\r\n    if (focusable) {\r\n      result = _element;\r\n      return true;\r\n    }\r\n\r\n    result = getFocusRedirectTarget({\r\n      context: _element,\r\n      skipFocusable: true,\r\n    });\r\n\r\n    return Boolean(result);\r\n  };\r\n\r\n  if (getTarget(element)) {\r\n    return result;\r\n  }\r\n\r\n  getParents({context: element}).slice(1).some(getTarget);\r\n  return result;\r\n}\r\n"]}