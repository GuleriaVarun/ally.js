{"version":3,"sources":["../../src/when/focusable.js"],"names":["context","callback","area","TypeError","element","label","filterCallback","target","_document","handle","disengage","removeEventListener","addEventListener"],"mappings":";;;;;;;;;;;;;;;;;;;oBAUe,YAAyC;AAAA,mFAAJ,EAAI;AAAA,QAA/BA,OAA+B,QAA/BA,OAA+B;AAAA,QAAtBC,QAAsB,QAAtBA,QAAsB;AAAA,QAAZC,IAAY,QAAZA,IAAY;;AACtD,QAAI,OAAOD,QAAP,KAAoB,UAAxB,EAAoC;AAClC,YAAM,IAAIE,SAAJ,CAAc,2DAAd,CAAN;AACD;;AAED,QAAMC,UAAU,gCAAiB;AAC/BC,aAAO,gBADwB;AAE/BL;AAF+B,KAAjB,CAAhB;;AAKA,QAAMM,iBAAiB,SAAjBA,cAAiB,CAASC,MAAT,EAAiB;AACtC,UAAI,CAAC,yBAAYA,MAAZ,CAAL,EAA0B;AACxB,eAAO,KAAP;AACD;;AAED,aAAON,SAASM,MAAT,CAAP;AACD,KAND;;AAQA,QAAMC,YAAY,2BAAYJ,OAAZ,CAAlB;AACA,QAAMK,SAAS,2BAAgB,EAAET,SAASI,OAAX,EAAoBH,UAAUK,cAA9B,EAA8CJ,UAA9C,EAAhB,CAAf;AACA,QAAMQ,YAAY,SAAZA,SAAY,GAAW;AAC3BF,gBAAUG,mBAAV,CAA8B,OAA9B,EAAuCD,SAAvC,EAAkD,IAAlD;AACAD,gBAAUA,OAAOC,SAAP,EAAV;AACD,KAHD;;AAKAF,cAAUI,gBAAV,CAA2B,OAA3B,EAAoCF,SAApC,EAA+C,IAA/C;;AAEA,WAAO,EAAEA,oBAAF,EAAP;AACD,G","file":"focusable.js","sourcesContent":["\r\n/*\r\n  trigger a callback once the context element is focusable and is fully visible in the viewport\r\n*/\r\n\r\nimport whenVisibleArea from './visible-area';\r\nimport isFocusable from '../is/focusable';\r\nimport contextToElement from '../util/context-to-element';\r\nimport getDocument from '../util/get-document';\r\n\r\nexport default function({context, callback, area} = {}) {\r\n  if (typeof callback !== 'function') {\r\n    throw new TypeError('when/focusable requires options.callback to be a function');\r\n  }\r\n\r\n  const element = contextToElement({\r\n    label: 'when/focusable',\r\n    context,\r\n  });\r\n\r\n  const filterCallback = function(target) {\r\n    if (!isFocusable(target)) {\r\n      return false;\r\n    }\r\n\r\n    return callback(target);\r\n  };\r\n\r\n  const _document = getDocument(element);\r\n  const handle = whenVisibleArea({ context: element, callback: filterCallback, area });\r\n  const disengage = function() {\r\n    _document.removeEventListener('focus', disengage, true);\r\n    handle && handle.disengage();\r\n  };\r\n\r\n  _document.addEventListener('focus', disengage, true);\r\n\r\n  return { disengage };\r\n}\r\n"]}