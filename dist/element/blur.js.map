{"version":3,"sources":["../../src/element/blur.js"],"names":["context","element","label","nodeName","toLowerCase","blur","document","activeElement","_window","HTMLElement","prototype","call","e","body","tabindex","getAttribute","setAttribute","focus","removeAttribute"],"mappings":";;;;;;kBAOe,UAASA,OAAT,EAAkB;AAC/B,MAAMC,UAAU,gCAAiB;AAC/BC,WAAO,cADwB;AAE/BF;AAF+B,GAAjB,CAAhB;;AAKA,MAAI,CAAC,6BAAgBC,OAAhB,CAAL,EAA+B;AAC7B,WAAO,IAAP;AACD;;AAED,MAAME,WAAWF,QAAQE,QAAR,CAAiBC,WAAjB,EAAjB;AACA,MAAID,aAAa,MAAjB,EAAyB;AACvB;AACA;AACA,WAAO,IAAP;AACD;;AAED,MAAIF,QAAQI,IAAZ,EAAkB;AAChBJ,YAAQI,IAAR;AACA,WAAOC,SAASC,aAAhB;AACD;;AAED,MAAMC,UAAU,yBAAUP,OAAV,CAAhB;;AAEA,MAAI;AACF;AACA;AACA;AACA;AACA;AACAO,YAAQC,WAAR,CAAoBC,SAApB,CAA8BL,IAA9B,CAAmCM,IAAnC,CAAwCV,OAAxC;AACD,GAPD,CAOE,OAAOW,CAAP,EAAU;AACV;AACA,QAAMC,OAAOL,QAAQF,QAAR,IAAoBE,QAAQF,QAAR,CAAiBO,IAAlD;AACA,QAAI,CAACA,IAAL,EAAW;AACT,aAAO,IAAP;AACD;;AAED;AACA;AACA,QAAMC,WAAWD,KAAKE,YAAL,CAAkB,UAAlB,CAAjB;AACAF,SAAKG,YAAL,CAAkB,UAAlB,EAA8B,IAA9B;AACAH,SAAKI,KAAL;AACA,QAAIH,QAAJ,EAAc;AACZD,WAAKG,YAAL,CAAkB,UAAlB,EAA8BF,QAA9B;AACD,KAFD,MAEO;AACLD,WAAKK,eAAL,CAAqB,UAArB;AACD;AACF;;AAED,SAAOV,QAAQF,QAAR,CAAiBC,aAAxB;AACD,C;;AAvDD;;;;AACA;;;;AACA;;;;;;AAJA","file":"blur.js","sourcesContent":["\r\n// wrapper for HTMLElement.prototype.blur\r\n\r\nimport isActiveElement from '../is/active-element';\r\nimport contextToElement from '../util/context-to-element';\r\nimport getWindow from '../util/get-window';\r\n\r\nexport default function(context) {\r\n  const element = contextToElement({\r\n    label: 'element/blur',\r\n    context,\r\n  });\r\n\r\n  if (!isActiveElement(element)) {\r\n    return null;\r\n  }\r\n\r\n  const nodeName = element.nodeName.toLowerCase();\r\n  if (nodeName === 'body') {\r\n    // prevent the browser window from losing focus in IE9\r\n    // according to https://bugs.jqueryui.com/ticket/9420\r\n    return null;\r\n  }\r\n\r\n  if (element.blur) {\r\n    element.blur();\r\n    return document.activeElement;\r\n  }\r\n\r\n  const _window = getWindow(element);\r\n\r\n  try {\r\n    // The element itself does not have a blur method.\r\n    // This is true for SVG elements in Firefox and IE,\r\n    // as well as MathML elements in every browser.\r\n    // IE9 - 11 will let us abuse HTMLElement's blur method,\r\n    // Firefox and Edge will throw an error.\r\n    _window.HTMLElement.prototype.blur.call(element);\r\n  } catch (e) {\r\n    // if we're not in an HTML document, we don't have access to document.body\r\n    const body = _window.document && _window.document.body;\r\n    if (!body) {\r\n      return null;\r\n    }\r\n\r\n    // we can't simply call document.body.focus() unless\r\n    // we make sure the element actually is focusable\r\n    const tabindex = body.getAttribute('tabindex');\r\n    body.setAttribute('tabindex', '-1');\r\n    body.focus();\r\n    if (tabindex) {\r\n      body.setAttribute('tabindex', tabindex);\r\n    } else {\r\n      body.removeAttribute('tabindex');\r\n    }\r\n  }\r\n\r\n  return _window.document.activeElement;\r\n}\r\n"]}